<% layout('./layouts/page.ejs') %>

<h1>Registration and login</h1>

<div class="card" style="width: 30rem;">
  <div class="card-body">
    <form name="login">
      <div class="form-group">
        <label for="exampleInputEmail1">Login</label>
        <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Enter login" name="username">
      </div>
      <div class="form-group">
        <label for="exampleInputPassword1">Password</label>
        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" name="password">
      </div>
      <button class="btn btn-primary" id="submitButton">Submit</button>
    </form>
  </div>
</div>

<script>
$( "form" ).on( "submit", function( event ) {
  event.preventDefault();

  $.post({
    url: '/login',
    data: $(this).serialize(),
    statusCode: {
      200: function() {
        window.location = '/'
      },
      403: function() {
        console.log(403)
      }
    }
  })
});

</script>